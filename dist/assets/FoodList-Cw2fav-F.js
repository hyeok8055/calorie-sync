import{r as R,I as Fe,_ as Te,a2 as Ne,a3 as Oe,p as De,l as ze,n as Pe,a4 as V,a5 as Be,$ as q,j as d,a6 as We,X as Ke,a7 as He,k as Ye,a8 as G,a9 as Ue,aa as de}from"./main-CaSg3MKk.js";import{s as Ve}from"./api-BoEgkleE.js";import{R as fe,C as Ge}from"./row-4rXelgiC.js";import{B as X}from"./button-C80fxAxj.js";import{I as Xe}from"./index-CAD2B0sN.js";import{L as pe}from"./index-D0SV6dX_.js";import{R as Je}from"./PlusOutlined-D77r4oHw.js";import"./Pagination-Bl5Cn_Ms.js";var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},Qe=function(e,s){return R.createElement(Fe,Te({},e,{ref:s,icon:Ze}))},qe=R.forwardRef(Qe);function D(t){return Array.isArray?Array.isArray(t):Ee(t)==="[object Array]"}const et=1/0;function tt(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-et?"-0":e}function st(t){return t==null?"":tt(t)}function $(t){return typeof t=="string"}function be(t){return typeof t=="number"}function nt(t){return t===!0||t===!1||rt(t)&&Ee(t)=="[object Boolean]"}function we(t){return typeof t=="object"}function rt(t){return we(t)&&t!==null}function _(t){return t!=null}function ee(t){return!t.trim().length}function Ee(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const it="Incorrect 'index' type",ot=t=>`Invalid value for key ${t}`,ct=t=>`Pattern length exceeds max of ${t}.`,at=t=>`Missing ${t} property in key`,lt=t=>`Property 'weight' in key '${t}' must be a positive integer`,ge=Object.prototype.hasOwnProperty;class ht{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let i=Re(n);this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Re(t){let e=null,s=null,n=null,i=1,r=null;if($(t)||D(t))n=t,e=xe(t),s=te(t);else{if(!ge.call(t,"name"))throw new Error(at("name"));const o=t.name;if(n=o,ge.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(lt(o));e=xe(o),s=te(o),r=t.getFn}return{path:e,id:s,weight:i,src:n,getFn:r}}function xe(t){return D(t)?t:t.split(".")}function te(t){return D(t)?t.join("."):t}function ut(t,e){let s=[],n=!1;const i=(r,o,c)=>{if(_(r))if(!o[c])s.push(r);else{let a=o[c];const h=r[a];if(!_(h))return;if(c===o.length-1&&($(h)||be(h)||nt(h)))s.push(st(h));else if(D(h)){n=!0;for(let u=0,p=h.length;u<p;u+=1)i(h[u],o,c+1)}else o.length&&i(h,o,c+1)}};return i(t,$(e)?e.split("."):e,0),n?s:s[0]}const dt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ft={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},pt={location:0,threshold:.6,distance:100},gt={useExtendedSearch:!1,getFn:ut,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var f={...ft,...dt,...pt,...gt};const xt=/[^ ]+/g;function mt(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(i){const r=i.match(xt).length;if(s.has(r))return s.get(r);const o=1/Math.pow(r,.5*t),c=parseFloat(Math.round(o*n)/n);return s.set(r,c),c},clear(){s.clear()}}}class ce{constructor({getFn:e=f.getFn,fieldNormWeight:s=f.fieldNormWeight}={}){this.norm=mt(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,$(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();$(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!_(e)||ee(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(_(o)){if(D(o)){let c=[];const a=[{nestedArrIndex:-1,value:o}];for(;a.length;){const{nestedArrIndex:h,value:u}=a.pop();if(_(u))if($(u)&&!ee(u)){let p={v:u,i:h,n:this.norm.get(u)};c.push(p)}else D(u)&&u.forEach((p,x)=>{a.push({nestedArrIndex:x,value:p})})}n.$[r]=c}else if($(o)&&!ee(o)){let c={v:o,n:this.norm.get(o)};n.$[r]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ie(t,e,{getFn:s=f.getFn,fieldNormWeight:n=f.fieldNormWeight}={}){const i=new ce({getFn:s,fieldNormWeight:n});return i.setKeys(t.map(Re)),i.setSources(e),i.create(),i}function yt(t,{getFn:e=f.getFn,fieldNormWeight:s=f.fieldNormWeight}={}){const{keys:n,records:i}=t,r=new ce({getFn:e,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r}function J(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:i=f.distance,ignoreLocation:r=f.ignoreLocation}={}){const o=e/t.length;if(r)return o;const c=Math.abs(n-s);return i?o+c/i:c?1:o}function St(t=[],e=f.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=t.length;r<o;r+=1){let c=t[r];c&&n===-1?n=r:!c&&n!==-1&&(i=r-1,i-n+1>=e&&s.push([n,i]),n=-1)}return t[r-1]&&r-n>=e&&s.push([n,r-1]),s}const W=32;function Mt(t,e,s,{location:n=f.location,distance:i=f.distance,threshold:r=f.threshold,findAllMatches:o=f.findAllMatches,minMatchCharLength:c=f.minMatchCharLength,includeMatches:a=f.includeMatches,ignoreLocation:h=f.ignoreLocation}={}){if(e.length>W)throw new Error(ct(W));const u=e.length,p=t.length,x=Math.max(0,Math.min(n,p));let m=r,M=x;const E=c>1||a,C=E?Array(p):[];let w;for(;(w=t.indexOf(e,M))>-1;){let I=J(e,{currentLocation:w,expectedLocation:x,distance:i,ignoreLocation:h});if(m=Math.min(I,m),M=w+u,E){let k=0;for(;k<u;)C[w+k]=1,k+=1}}M=-1;let F=[],A=1,j=u+p;const z=1<<u-1;for(let I=0;I<u;I+=1){let k=0,L=j;for(;k<L;)J(e,{errors:I,currentLocation:x+L,expectedLocation:x,distance:i,ignoreLocation:h})<=m?k=L:j=L,L=Math.floor((j-k)/2+k);j=L;let U=Math.max(1,x-L+1),K=o?p:Math.min(x+L,p)+u,T=Array(K+2);T[K+1]=(1<<I)-1;for(let v=K;v>=U;v-=1){let B=v-1,l=s[t.charAt(B)];if(E&&(C[B]=+!!l),T[v]=(T[v+1]<<1|1)&l,I&&(T[v]|=(F[v+1]|F[v])<<1|1|F[v+1]),T[v]&z&&(A=J(e,{errors:I,currentLocation:B,expectedLocation:x,distance:i,ignoreLocation:h}),A<=m)){if(m=A,M=B,M<=x)break;U=Math.max(1,2*x-M)}}if(J(e,{errors:I+1,currentLocation:x,expectedLocation:x,distance:i,ignoreLocation:h})>m)break;F=T}const Y={isMatch:M>=0,score:Math.max(.001,A)};if(E){const I=St(C,c);I.length?a&&(Y.indices=I):Y.isMatch=!1}return Y}function bt(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const i=t.charAt(s);e[i]=(e[i]||0)|1<<n-s-1}return e}class ve{constructor(e,{location:s=f.location,threshold:n=f.threshold,distance:i=f.distance,includeMatches:r=f.includeMatches,findAllMatches:o=f.findAllMatches,minMatchCharLength:c=f.minMatchCharLength,isCaseSensitive:a=f.isCaseSensitive,ignoreLocation:h=f.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:h},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(x,m)=>{this.chunks.push({pattern:x,alphabet:bt(x),startIndex:m})},p=this.pattern.length;if(p>W){let x=0;const m=p%W,M=p-m;for(;x<M;)u(this.pattern.substr(x,W),x),x+=W;if(m){const E=p-W;u(this.pattern.substr(E),E)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let M={isMatch:!0,score:0};return n&&(M.indices=[[0,e.length-1]]),M}const{location:i,distance:r,threshold:o,findAllMatches:c,minMatchCharLength:a,ignoreLocation:h}=this.options;let u=[],p=0,x=!1;this.chunks.forEach(({pattern:M,alphabet:E,startIndex:C})=>{const{isMatch:w,score:F,indices:A}=Mt(e,M,E,{location:i+C,distance:r,threshold:o,findAllMatches:c,minMatchCharLength:a,includeMatches:n,ignoreLocation:h});w&&(x=!0),p+=F,w&&A&&(u=[...u,...A])});let m={isMatch:x,score:x?p/this.chunks.length:1};return x&&n&&(m.indices=u),m}}class P{constructor(e){this.pattern=e}static isMultiMatch(e){return me(e,this.multiRegex)}static isSingleMatch(e){return me(e,this.singleRegex)}search(){}}function me(t,e){const s=t.match(e);return s?s[1]:null}class wt extends P{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Et extends P{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Rt extends P{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class It extends P{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class vt extends P{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class _t extends P{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class _e extends P{constructor(e,{location:s=f.location,threshold:n=f.threshold,distance:i=f.distance,includeMatches:r=f.includeMatches,findAllMatches:o=f.findAllMatches,minMatchCharLength:c=f.minMatchCharLength,isCaseSensitive:a=f.isCaseSensitive,ignoreLocation:h=f.ignoreLocation}={}){super(e),this._bitapSearch=new ve(e,{location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class je extends P{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const i=[],r=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+r,i.push([n,s-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const se=[wt,je,Rt,It,_t,vt,Et,_e],ye=se.length,jt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,At="|";function Ct(t,e={}){return t.split(At).map(s=>{let n=s.trim().split(jt).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=n.length;r<o;r+=1){const c=n[r];let a=!1,h=-1;for(;!a&&++h<ye;){const u=se[h];let p=u.isMultiMatch(c);p&&(i.push(new u(p,e)),a=!0)}if(!a)for(h=-1;++h<ye;){const u=se[h];let p=u.isSingleMatch(c);if(p){i.push(new u(p,e));break}}}return i})}const kt=new Set([_e.type,je.type]);class Lt{constructor(e,{isCaseSensitive:s=f.isCaseSensitive,includeMatches:n=f.includeMatches,minMatchCharLength:i=f.minMatchCharLength,ignoreLocation:r=f.ignoreLocation,findAllMatches:o=f.findAllMatches,location:c=f.location,threshold:a=f.threshold,distance:h=f.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:c,threshold:a,distance:h},this.pattern=s?e:e.toLowerCase(),this.query=Ct(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],c=0;for(let a=0,h=s.length;a<h;a+=1){const u=s[a];o.length=0,r=0;for(let p=0,x=u.length;p<x;p+=1){const m=u[p],{isMatch:M,indices:E,score:C}=m.search(e);if(M){if(r+=1,c+=C,n){const w=m.constructor.type;kt.has(w)?o=[...o,...E]:o.push(E)}}else{c=0,r=0,o.length=0;break}}if(r){let p={isMatch:!0,score:c/r};return n&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const ne=[];function $t(...t){ne.push(...t)}function re(t,e){for(let s=0,n=ne.length;s<n;s+=1){let i=ne[s];if(i.condition(t,e))return new i(t,e)}return new ve(t,e)}const Z={AND:"$and",OR:"$or"},ie={PATH:"$path",PATTERN:"$val"},oe=t=>!!(t[Z.AND]||t[Z.OR]),Ft=t=>!!t[ie.PATH],Tt=t=>!D(t)&&we(t)&&!oe(t),Se=t=>({[Z.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Ae(t,e,{auto:s=!0}={}){const n=i=>{let r=Object.keys(i);const o=Ft(i);if(!o&&r.length>1&&!oe(i))return n(Se(i));if(Tt(i)){const a=o?i[ie.PATH]:r[0],h=o?i[ie.PATTERN]:i[a];if(!$(h))throw new Error(ot(a));const u={keyId:te(a),pattern:h};return s&&(u.searcher=re(h,e)),u}let c={children:[],operator:r[0]};return r.forEach(a=>{const h=i[a];D(h)&&h.forEach(u=>{c.children.push(n(u))})}),c};return oe(t)||(t=Se(t)),n(t)}function Nt(t,{ignoreFieldNorm:e=f.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:r,score:o})=>{const c=i?i.weight:null;n*=Math.pow(o===0&&c?Number.EPSILON:o,(c||1)*(e?1:r))}),s.score=n})}function Ot(t,e){const s=t.matches;e.matches=[],_(s)&&s.forEach(n=>{if(!_(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let o={indices:i,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function Dt(t,e){e.score=t.score}function zt(t,e,{includeMatches:s=f.includeMatches,includeScore:n=f.includeScore}={}){const i=[];return s&&i.push(Ot),n&&i.push(Dt),t.map(r=>{const{idx:o}=r,c={item:e[o],refIndex:o};return i.length&&i.forEach(a=>{a(r,c)}),c})}class H{constructor(e,s={},n){this.options={...f,...s},this.options.useExtendedSearch,this._keyStore=new ht(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof ce))throw new Error(it);this._myIndex=s||Ie(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){_(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,s.push(r))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:c}=this.options;let a=$(e)?$(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Nt(a,{ignoreFieldNorm:c}),r&&a.sort(o),be(s)&&s>-1&&(a=a.slice(0,s)),zt(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const s=re(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:o,n:c})=>{if(!_(r))return;const{isMatch:a,score:h,indices:u}=s.searchIn(r);a&&i.push({item:r,idx:o,matches:[{score:h,value:r,norm:c,indices:u}]})}),i}_searchLogical(e){const s=Ae(e,this.options),n=(c,a,h)=>{if(!c.children){const{keyId:p,searcher:x}=c,m=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(a,p),searcher:x});return m&&m.length?[{idx:h,item:a,matches:m}]:[]}const u=[];for(let p=0,x=c.children.length;p<x;p+=1){const m=c.children[p],M=n(m,a,h);if(M.length)u.push(...M);else if(c.operator===Z.AND)return[]}return u},i=this._myIndex.records,r={},o=[];return i.forEach(({$:c,i:a})=>{if(_(c)){let h=n(s,c,a);h.length&&(r[a]||(r[a]={idx:a,item:c,matches:[]},o.push(r[a])),h.forEach(({matches:u})=>{r[a].matches.push(...u)}))}}),o}_searchObjectList(e){const s=re(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:c})=>{if(!_(o))return;let a=[];n.forEach((h,u)=>{a.push(...this._findMatches({key:h,value:o[u],searcher:s}))}),a.length&&r.push({idx:c,item:o,matches:a})}),r}_findMatches({key:e,value:s,searcher:n}){if(!_(s))return[];let i=[];if(D(s))s.forEach(({v:r,i:o,n:c})=>{if(!_(r))return;const{isMatch:a,score:h,indices:u}=n.searchIn(r);a&&i.push({score:h,key:e,value:r,idx:o,norm:c,indices:u})});else{const{v:r,n:o}=s,{isMatch:c,score:a,indices:h}=n.searchIn(r);c&&i.push({score:a,key:e,value:r,norm:o,indices:h})}return i}}H.version="7.0.0";H.createIndex=Ie;H.parseIndex=yt;H.config=f;H.parseQuery=Ae;$t(Lt);const Me=t=>({type:Ne,payload:t}),{Text:O}=Ye,Pt=["eodud653923@gmail.com","youngwonhahn00@gmail.com","juhyeok0123@gmail.com"],Bt=30*24*60*60*1e3,Zt=()=>{const{mealType:t}=Oe(),[e,s]=R.useState(""),[n,i]=R.useState([]),[r,o]=R.useState([]),c=De(),[a,h]=R.useState([]),[u,p]=R.useState(!1),x=ze(),m=Pe(l=>l.food.foods),[M,E]=R.useState(!1),[C,w]=R.useState(!1),[F,A]=R.useState(!1),j=R.useRef(null),z=R.useRef("");R.useEffect(()=>{const l=V(G,"foods"),g=Be(l,y=>{const N=y.val();N&&x(Me(N))}),S=()=>{const y=q.currentUser;y&&y.email?E(Pt.includes(y.email)):E(!1)};S();const b=q.onAuthStateChanged(S);return()=>{g(),b()}},[x]),R.useEffect(()=>{if(m){const l=new H(Object.values(m),{keys:["name"],threshold:.3});let g=e?l.search(e).map(S=>S.item):[];e&&g.sort((S,b)=>{const y=S.name.toLowerCase()===e.toLowerCase(),N=b.name.toLowerCase()===e.toLowerCase();return y&&!N?-1:!y&&N?1:0}),i(g)}},[e,m]),R.useEffect(()=>{const l=e.trim();if(!l){A(!1),w(!1),h([]),p(!1),z.current="";return}if(l!==z.current)return A(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{K(l)},800),()=>{j.current&&clearTimeout(j.current)}},[e]);const Y=l=>{const g=l.target.value;s(g)},I=()=>{const l=t==="snack"?"snacks":t,g=r.map(S=>S.name).join(",");c(`/calories/calorieEntry?items=${g}&type=${l}`)},k=()=>{switch(t){case"breakfast":return"아침";case"lunch":return"점심";case"dinner":return"저녁";case"snack":return"간식";default:return"식사"}},L=async l=>{try{const g=l.toLowerCase().trim(),S=V(G,`searchCache/${g}`),b=await Ue(S);if(b.exists()){const y=b.val(),N=Date.now(),Q=new Date(y.timestamp).getTime();return N-Q<Bt?y.results:null}return null}catch{return null}},U=async(l,g)=>{try{const S=l.toLowerCase().trim(),b=V(G,`searchCache/${S}`),y={query:l,results:g,timestamp:new Date().toISOString()};await de(b,y)}catch{}},K=async l=>{if(!(l===z.current&&z.current!=="")){z.current=l,p(!0),h([]),w(!1);try{const g=await L(l);if(g&&g.length>0)h(g),w(!0);else{const S=await Ve(l);if(S&&S.items&&S.items.length>0){const b=S.items.map(y=>({name:y.name,brand:y.brand,serving:y.serving,weight:y.weight,unit:`${y.serving} (${y.weight})`,calories:parseFloat(y.calories),carbs:parseFloat(y.carbs),protein:parseFloat(y.protein),fat:parseFloat(y.fat)}));h(b),w(!0),await U(l,b)}else w(!1)}}catch(g){console.error("음식 검색 실패:",g),w(!1)}finally{p(!1)}}},T=l=>{const g=l.trim();g&&g!==z.current&&(j.current&&clearTimeout(j.current),K(g))},ae=l=>{o(r.filter(g=>g!==l))},v=async l=>{try{const S=(q.currentUser?.email||"default").replace(/[^a-zA-Z0-9]/g,"_"),b=new Date,y=b.getFullYear(),N=String(b.getMonth()+1).padStart(2,"0"),Q=String(b.getDate()).padStart(2,"0"),Ce=String(b.getHours()).padStart(2,"0"),ke=String(b.getMinutes()).padStart(2,"0"),Le=String(b.getSeconds()).padStart(2,"0"),le=`${y}-${N}-${Q}-${Ce}-${ke}-${Le}`,he=`${l.name}_${S}_${le}`,$e=V(G,`foods/${he}`),ue={...l,createdAt:le};return await de($e,ue),{...ue,id:he}}catch(g){throw console.error("음식 저장 실패:",g),g}},B=async l=>{try{const g={name:l.name,calories:l.calories,nutrients:{carbs:l.carbs,protein:l.protein,fat:l.fat},weight:l.weight,brand:l.brand||null,serving:l.serving||null},S=await v(g);if(o([...r,S]),m){const b={...m,[S.id]:S};x(Me(b))}w(!1),A(!1),s("")}catch(g){console.error("음식 추가 실패:",g),alert("음식 추가에 실패했습니다.")}};return d.jsxs("div",{style:{padding:"20px",height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",position:"relative"},children:[d.jsxs(fe,{justify:"space-between",align:"middle",style:{marginBottom:15},children:[d.jsxs(O,{style:{fontSize:"24px",fontWeight:"800",color:"#5FDD9D",letterSpacing:"1px",fontFamily:"Pretendard-800"},children:[k()," 식사목록"]}),d.jsx(X,{type:"primary",onClick:I,disabled:r.length===0,style:{fontFamily:"Pretendard-700",height:"40px",borderRadius:"8px",background:r.length>0?"#5FDD9D":void 0,boxShadow:r.length>0?"0 2px 6px rgba(95, 221, 157, 0.4)":void 0},children:r.length>0?`${r.length}개 선택 완료`:"음식을 선택해주세요"})]}),d.jsx(fe,{gutter:[16,24],align:"middle",style:{marginBottom:5},children:d.jsx(Ge,{span:24,children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(Xe,{placeholder:"먹은 음식을 검색해보세요",value:e,size:"large",onChange:Y,onPressEnter:l=>T(l.target.value),style:{width:"100%",height:"56px",borderRadius:"16px",border:"2px solid #f0f0f0",fontSize:"16px",paddingLeft:"55px",paddingRight:"20px",paddingBottom:"7px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",transition:"all 0.3s ease",background:"linear-gradient(135deg, #ffffff 0%, #fafafa 100%)"},className:"modern-search-input",suffix:d.jsx(X,{type:"text",icon:d.jsx(We,{style:{fontSize:"20px",color:"#5FDD9D"}}),onClick:()=>T(e),style:{border:"none",background:"transparent",height:"44px",width:"44px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"flex-end"}})}),d.jsx("div",{style:{position:"absolute",left:"18px",top:"48%",transform:"translateY(-50%)",fontSize:"20px",pointerEvents:"none"},children:"🍽️"})]})})}),F&&(e||u||C&&a.length>0)&&d.jsxs("div",{style:{position:"absolute",top:"130px",left:"20px",right:"20px",backgroundColor:"white",borderRadius:"16px",border:"1px solid #f0f0f0",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.12)",zIndex:1e3,maxHeight:"400px",overflowY:"auto"},children:[u&&d.jsxs("div",{style:{textAlign:"center",padding:"30px"},children:[d.jsx(Ke,{size:"large"}),d.jsxs(O,{style:{display:"block",marginTop:"15px",color:"#666",fontSize:"16px"},children:["'",e,"' 검색 중..."]})]}),C&&a.length>0&&d.jsxs("div",{style:{padding:"15px"},children:[d.jsx("div",{style:{padding:"5px 10px",marginBottom:"15px"},children:d.jsxs(O,{style:{fontSize:"18px",fontWeight:"600",color:"#333"},children:["'",e,"' 검색 결과"]})}),d.jsx(pe,{dataSource:a,renderItem:l=>d.jsx(pe.Item,{onClick:()=>B(l),style:{padding:"15px",cursor:"pointer",borderRadius:"12px",marginBottom:"8px",backgroundColor:"#f9f9f9",border:"1px solid #f0f0f0",transition:"all 0.2s ease"},className:"hover:bg-gray-50 hover:shadow-md",children:d.jsxs("div",{style:{width:"100%"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx(O,{style:{fontSize:"16px",fontWeight:"600"},children:l.name}),d.jsx(X,{type:"text",icon:d.jsx(Je,{}),style:{color:"#5FDD9D",backgroundColor:"rgba(95, 221, 157, 0.1)",borderRadius:"8px",width:"32px",height:"32px"},onClick:g=>{g.stopPropagation(),B(l)}})]}),d.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:[l.brand&&d.jsx("span",{style:{marginRight:"8px"},children:l.brand}),d.jsx("span",{children:l.unit})]}),M&&d.jsxs("div",{style:{fontSize:"12px",color:"#888",marginTop:"5px"},children:["칼로리: ",l.calories,"kcal | 탄수화물: ",l.carbs,"g | 단백질: ",l.protein,"g | 지방: ",l.fat,"g"]})]})})})]})]}),r.length===0&&!e&&!F&&d.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"40px"},children:d.jsx(He,{image:d.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:"🍽️"}),description:d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx(O,{style:{fontSize:"18px",fontWeight:"600",color:"#666",display:"block",marginBottom:"8px"},children:"음식을 검색해보세요"}),d.jsxs(O,{style:{fontSize:"14px",color:"#999",lineHeight:"1.5"},children:["위 검색창에서 드신 음식을 검색하고",d.jsx("br",{}),"선택하여 칼로리를 기록해보세요"]})]})})}),r.length>0&&d.jsxs("div",{style:{marginTop:"10px",marginBottom:"15px",backgroundColor:"white",borderRadius:"16px",border:"1px solid #f0f0f0",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsxs(O,{style:{fontSize:"18px",fontWeight:"600",color:"#333"},children:["선택된 음식 (",r.length,"개)"]})}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:r.map((l,g)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px 20px",backgroundColor:"linear-gradient(135deg, #f0fff7 0%, #f6fffa 100%)",borderRadius:"12px",border:"1px solid #e6f7ff",transition:"all 0.2s ease"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx(O,{style:{fontSize:"16px",fontWeight:"600",color:"#5FDD9D",fontFamily:"Pretendard-600"},children:l.name}),l.weight&&d.jsxs(O,{style:{fontSize:"14px",color:"#888",marginLeft:"8px",fontFamily:"Pretendard-400"},children:["(",l.weight,")"]})]}),d.jsx(X,{type:"text",icon:d.jsx(qe,{}),style:{color:"#ff4d4f",backgroundColor:"rgba(255, 77, 79, 0.1)",borderRadius:"8px",width:"32px",height:"32px"},onClick:()=>ae(l)})]},g))})]})]})};export{Zt as default};
