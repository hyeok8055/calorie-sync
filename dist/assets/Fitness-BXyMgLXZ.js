import{q as ve,r as g,s as i,t as Ce,v as re,w as le,x as oe,c as A,y as Z,z as we,L as ie,A as be,g as Se,m as je,C as ke,B as Ee,I as $e,_ as De,E as ce,F as de,G as z,H as ue,J as fe,N as _,O as he,P as Ne,n as me,j as r,Q as Ie,k as Le,U as Me,V as Oe,W as Be}from"./main-CaSg3MKk.js";import{d as W,P as Pe}from"./progress-DtTapCuE.js";import{S as Te}from"./search-bar-li5QUZt9.js";import{i as Q,M as We}from"./index-Boca6uZA.js";import{B as F}from"./button-C80fxAxj.js";import{I as Fe}from"./index-CAD2B0sN.js";import{T as X}from"./index-C-U6eI8X.js";import{R as Re}from"./PlusOutlined-D77r4oHw.js";import"./dayjs.min-C8g0wliz.js";import"./InfoCircleFilled-BewFWKco.js";import"./Skeleton-BYOnDDPi.js";const Ve=ve(g.useEffect),K=()=>i.createElement("svg",{height:"1em",viewBox:"0 0 44 44"},i.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-100.000000, -22.000000)"},i.createElement("g",{transform:"translate(100.000000, 22.000000)"},i.createElement("rect",{x:"0",y:"0",width:"44",height:"44"}),i.createElement("g",{transform:"translate(12.000000, 4.000000)",fill:"currentColor",fillRule:"nonzero"},i.createElement("path",{d:"M19.4833058,2.71985611 L3.53051139,17.0699744 C3.0173831,17.5315665 2.97522952,18.3220903 3.43630803,18.8357433 L3.43630796,18.8357432 C3.46601289,18.8688164 3.49745845,18.9002801 3.53051133,18.9300007 L19.4833057,33.2801611 C20.1234001,33.8559077 20.1759552,34.8420707 19.6007967,35.4827774 C19.0256382,36.1235263 18.0404824,36.1761351 17.400388,35.6003885 L1.44759367,21.2502703 L1.4475933,21.25027 C1.33208743,21.1463692 1.22220259,21.036372 1.11840792,20.920748 C-0.49302969,19.1256817 -0.345639536,16.3628317 1.4475933,14.7497465 L17.4003877,0.399628282 C18.0404821,-0.176160428 19.0256378,-0.123509422 19.6007963,0.517239417 C20.1759548,1.1579461 20.1233997,2.14410915 19.4833053,2.7198557 L19.4833058,2.71985611 Z"})))))),ee=()=>i.createElement("svg",{height:"1em",viewBox:"0 0 44 44"},i.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-24.000000, -22.000000)"},i.createElement("g",{transform:"translate(24.000000, 22.000000)"},i.createElement("rect",{x:"0",y:"0",width:"44",height:"44"}),i.createElement("g",{transform:"translate(7.000000, 4.000000)",fill:"currentColor",fillRule:"nonzero"},i.createElement("path",{d:"M19.4833058,2.71985611 L3.53051139,17.0699744 C3.0173831,17.5315665 2.97522952,18.3220903 3.43630803,18.8357433 L3.43630796,18.8357432 C3.46601289,18.8688164 3.49745845,18.9002801 3.53051133,18.9300007 L19.4833057,33.2801611 C20.1234001,33.8559077 20.1759552,34.8420707 19.6007967,35.4827774 C19.0256382,36.1235263 18.0404824,36.1761351 17.400388,35.6003885 L1.44759367,21.2502703 L1.4475933,21.25027 C1.33208743,21.1463692 1.22220259,21.036372 1.11840792,20.920748 C-0.49302969,19.1256817 -0.345639536,16.3628317 1.4475933,14.7497465 L17.4003877,0.399628282 C18.0404821,-0.176160428 19.0256378,-0.123509422 19.6007963,0.517239417 C20.1759548,1.1579461 20.1233997,2.14410915 19.4833053,2.7198557 L19.4833058,2.71985611 Z"}),i.createElement("path",{d:"M19.5305114,17.0699744 C19.0173831,17.5315665 18.9752295,18.3220903 19.436308,18.8357433 C19.4660129,18.8688164 19.4974585,18.9002801 19.5305113,18.9300007 L29.4833057,27.2801611 C30.1234001,27.8559077 30.1759552,28.8420707 29.6007967,29.4827774 C29.0256382,30.1235263 28.0404824,30.1761351 27.400388,29.6003885 L17.4475937,21.2502703 C17.3320874,21.1463692 17.2222026,21.036372 17.1184079,20.920748 C15.5069703,19.1256817 15.6543605,16.3628317 17.4475933,14.7497465 L27.4003877,6.39962828 C28.0404821,5.82383957 29.0256378,5.87649058 29.6007963,6.51723942 C30.1759548,7.1579461 30.1233997,8.14410915 29.4833053,8.7198557 L19.5305114,17.0699744 Z"}))))));var Y={exports:{}},Ae=Y.exports,te;function ze(){return te||(te=1,function(t,a){(function(s,e){t.exports=e()})(Ae,function(){var s="day";return function(e,l,h){var p=function(m){return m.add(4-m.isoWeekday(),s)},u=l.prototype;u.isoWeekYear=function(){return p(this).year()},u.isoWeek=function(m){if(!this.$utils().u(m))return this.add(7*(m-this.isoWeek()),s);var f,v,c,E,L=p(this),k=(f=this.isoWeekYear(),v=this.$u,c=(v?h.utc:h)().year(f).startOf("year"),E=4-c.isoWeekday(),c.isoWeekday()>4&&(E+=7),c.add(E,s));return L.diff(k,"week")+1},u.isoWeekday=function(m){return this.$utils().u(m)?this.day()||7:this.day(this.day()%7?m:m-7)};var N=u.startOf;u.startOf=function(m,f){var v=this.$utils(),c=!!v.u(f)||f;return v.p(m)==="isoweek"?c?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):N.bind(this)(m,f)}}})}(Y)),Y.exports}var Ge=ze();const Ye=Ce(Ge);function _e(t,a){return t.replace(/\$\{\w+\}/g,s=>{const e=s.slice(2,-1);return a[e]})}function ae(t,a){return t===void 0||a===null?null:Array.isArray(a)?a:[a,a]}function H(t){return W().year(t.year).month(t.month-1).date(1)}W.extend(Ye);const C="adm-calendar",qe={weekStartsOn:"Sunday",defaultValue:null,allowClear:!0,prevMonthButton:i.createElement(K,null),prevYearButton:i.createElement(ee,null),nextMonthButton:i.createElement(K,null),nextYearButton:i.createElement(ee,null)},He=g.forwardRef((t,a)=>{const s=W(),e=re(qe,t),{locale:l}=le(),h=[...l.Calendar.markItems];if(e.weekStartsOn==="Sunday"){const x=h.pop();x&&h.unshift(x)}const[p,u]=oe({value:e.value===void 0?void 0:ae(e.selectionMode,e.value),defaultValue:ae(e.selectionMode,e.defaultValue),onChange:x=>{var w,b;e.selectionMode==="single"?(w=e.onChange)===null||w===void 0||w.call(e,x?x[0]:null):e.selectionMode==="range"&&((b=e.onChange)===null||b===void 0||b.call(e,x))}}),[N,m]=g.useState(!1),[f,v]=g.useState(()=>W(p?p[0]:s).date(1));Ve(()=>{var x;(x=e.onPageChange)===null||x===void 0||x.call(e,f.year(),f.month()+1)},[f]),g.useImperativeHandle(a,()=>({jumpTo:x=>{let w;typeof x=="function"?w=x({year:f.year(),month:f.month()+1}):w=x,v(H(w))},jumpToToday:()=>{v(W().date(1))}}));const c=(x,w,b)=>{const y=f[x](w,b);if(x==="subtract"&&e.minPage){const S=H(e.minPage);if(y.isBefore(S,b))return}if(x==="add"&&e.maxPage){const S=H(e.maxPage);if(y.isAfter(S,b))return}v(y)},E=i.createElement("div",{className:`${C}-header`},i.createElement("a",{className:`${C}-arrow-button ${C}-arrow-button-year`,onClick:()=>{c("subtract",1,"year")}},e.prevYearButton),i.createElement("a",{className:`${C}-arrow-button ${C}-arrow-button-month`,onClick:()=>{c("subtract",1,"month")}},e.prevMonthButton),i.createElement("div",{className:`${C}-title`},_e(l.Calendar.yearAndMonth,{year:f.year().toString(),month:(f.month()+1).toString()})),i.createElement("a",{className:A(`${C}-arrow-button`,`${C}-arrow-button-right`,`${C}-arrow-button-right-month`),onClick:()=>{c("add",1,"month")}},e.nextMonthButton),i.createElement("a",{className:A(`${C}-arrow-button`,`${C}-arrow-button-right`,`${C}-arrow-button-right-year`),onClick:()=>{c("add",1,"year")}},e.nextYearButton)),L=g.useMemo(()=>e.max&&W(e.max),[e.max]),k=g.useMemo(()=>e.min&&W(e.min),[e.min]);function M(){var x;const w=[];let b=f.subtract(f.isoWeekday(),"day");for(e.weekStartsOn==="Monday"&&(b=b.add(1,"day"));w.length<6*7;){const y=b;let S=!1,I=!1,$=!1,O=!1,R=!1;if(p){const[o,d]=p;I=y.isSame(o,"day"),$=y.isSame(d,"day"),S=I||$||y.isAfter(o,"day")&&y.isBefore(d,"day"),S&&(O=(w.length%7===0||y.isSame(y.startOf("month"),"day"))&&!I,R=(w.length%7===6||y.isSame(y.endOf("month"),"day"))&&!$)}const T=y.month()===f.month(),n=e.shouldDisableDate?e.shouldDisableDate(y.toDate()):L&&y.isAfter(L,"day")||k&&y.isBefore(k,"day");w.push(i.createElement("div",{key:y.valueOf(),className:A(`${C}-cell`,(n||!T)&&`${C}-cell-disabled`,T&&{[`${C}-cell-today`]:y.isSame(s,"day"),[`${C}-cell-selected`]:S,[`${C}-cell-selected-begin`]:I,[`${C}-cell-selected-end`]:$,[`${C}-cell-selected-row-begin`]:O,[`${C}-cell-selected-row-end`]:R}),onClick:()=>{if(!e.selectionMode||n)return;const o=y.toDate();T||v(y.clone().date(1));function d(){if(!e.allowClear||!p)return!1;const[j,D]=p;return y.isSame(j,"date")&&y.isSame(D,"day")}if(e.selectionMode==="single"){if(e.allowClear&&d()){u(null);return}u([o,o])}else if(e.selectionMode==="range"){if(!p){u([o,o]),m(!0);return}if(d()){u(null),m(!1);return}if(N){const j=p[0];u(j>o?[o,j]:[j,o]),m(!1)}else u([o,o]),m(!0)}}},i.createElement("div",{className:`${C}-cell-top`},e.renderDate?e.renderDate(y.toDate()):y.date()),i.createElement("div",{className:`${C}-cell-bottom`},(x=e.renderLabel)===null||x===void 0?void 0:x.call(e,y.toDate())))),b=b.add(1,"day")}return w}const P=i.createElement("div",{className:`${C}-cells`},M()),B=i.createElement("div",{className:`${C}-mark`},h.map((x,w)=>i.createElement("div",{key:w,className:`${C}-mark-cell`},x)));return Z(e,i.createElement("div",{className:C},E,B,P))}),ge=g.createContext(null),Ue="adm-check-list",Je={multiple:!1,defaultValue:[],activeIcon:i.createElement(we,null)},Ze=t=>{const{checkList:a={}}=le(),s=re(Je,a,t),[e,l]=oe(s);function h(v){s.multiple?l([...e,v]):l([v])}function p(v){l(e.filter(c=>c!==v))}const{activeIcon:u,extra:N,disabled:m,readOnly:f}=s;return i.createElement(ge.Provider,{value:{value:e,check:h,uncheck:p,activeIcon:u,extra:N,disabled:m,readOnly:f}},Z(s,i.createElement(ie,{mode:s.mode,className:Ue},s.children)))},G="adm-check-list-item",Qe=t=>{const a=g.useContext(ge);if(a===null)return null;const s=a.value.includes(t.value),e=t.readOnly||a.readOnly,l=s?a.activeIcon:null,h=a.extra?a.extra(s):l,p=i.createElement("div",{className:`${G}-extra`},h);return Z(t,i.createElement(ie.Item,{title:t.title,className:A(G,e&&`${G}-readonly`,s&&`${G}-active`),description:t.description,prefix:t.prefix,onClick:u=>{var N;e||(s?a.uncheck(t.value):a.check(t.value),(N=t.onClick)===null||N===void 0||N.call(t,u))},arrow:!1,clickable:!e,extra:p,disabled:t.disabled||a.disabled},t.children))},se=be(Ze,{Item:Qe}),xe=["wrap","nowrap","wrap-reverse"],pe=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],ye=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Xe=(t,a)=>{const s=a.wrap===!0?"wrap":a.wrap;return{[`${t}-wrap-${s}`]:s&&xe.includes(s)}},Ke=(t,a)=>{const s={};return ye.forEach(e=>{s[`${t}-align-${e}`]=a.align===e}),s[`${t}-align-stretch`]=!a.align&&!!a.vertical,s},et=(t,a)=>{const s={};return pe.forEach(e=>{s[`${t}-justify-${e}`]=a.justify===e}),s};function tt(t,a){return A(Object.assign(Object.assign(Object.assign({},Xe(t,a)),Ke(t,a)),et(t,a)))}const at=t=>{const{componentCls:a}=t;return{[a]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},st=t=>{const{componentCls:a}=t;return{[a]:{"&-gap-small":{gap:t.flexGapSM},"&-gap-middle":{gap:t.flexGap},"&-gap-large":{gap:t.flexGapLG}}}},nt=t=>{const{componentCls:a}=t,s={};return xe.forEach(e=>{s[`${a}-wrap-${e}`]={flexWrap:e}}),s},rt=t=>{const{componentCls:a}=t,s={};return ye.forEach(e=>{s[`${a}-align-${e}`]={alignItems:e}}),s},lt=t=>{const{componentCls:a}=t,s={};return pe.forEach(e=>{s[`${a}-justify-${e}`]={justifyContent:e}}),s},ot=()=>({}),it=Se("Flex",t=>{const{paddingXS:a,padding:s,paddingLG:e}=t,l=je(t,{flexGapSM:a,flexGap:s,flexGapLG:e});return[at(l),st(l),nt(l),rt(l),lt(l)]},ot,{resetStyle:!1});var ct=function(t,a){var s={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&a.indexOf(e)<0&&(s[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,e=Object.getOwnPropertySymbols(t);l<e.length;l++)a.indexOf(e[l])<0&&Object.prototype.propertyIsEnumerable.call(t,e[l])&&(s[e[l]]=t[e[l]]);return s};const ne=i.forwardRef((t,a)=>{const{prefixCls:s,rootClassName:e,className:l,style:h,flex:p,gap:u,children:N,vertical:m=!1,component:f="div"}=t,v=ct(t,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:c,direction:E,getPrefixCls:L}=i.useContext(ke),k=L("flex",s),[M,P,B]=it(k),x=m??c?.vertical,w=A(l,e,c?.className,k,P,B,tt(k,t),{[`${k}-rtl`]:E==="rtl",[`${k}-gap-${u}`]:Q(u),[`${k}-vertical`]:x}),b=Object.assign(Object.assign({},c?.style),h);return p&&(b.flex=p),u&&!Q(u)&&(b.gap=u),M(i.createElement(f,Object.assign({ref:a,className:w,style:b},Ee(v,["justify","wrap","align"])),N))});var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},ut=function(a,s){return g.createElement($e,De({},a,{ref:s,icon:dt}))},ft=g.forwardRef(ut);const ht=t=>{const[a,s]=g.useState([]),[e,l]=g.useState(!1),[h,p]=g.useState(null);return g.useEffect(()=>{(async()=>{if(t){l(!0);try{const f=ce(de(z,"users",t,"fitness"),ue("date","desc")),c=(await fe(f)).docs.map(E=>{const L=E.data();return{...L,id:E.id,exercises:L.exercises.map(k=>({...k,id:E.id}))}});s(c)}catch(f){p(f)}finally{l(!1)}}})()},[t]),{fitnessData:a,uploadData:async(m,f,v)=>{if(t){l(!0);try{const c=_(z,"users",t,"fitness",m);await he(c,{date:m,weight:f,exercises:v})}catch(c){p(c)}finally{l(!1)}}},deleteData:async m=>{if(!(!t||!m)){l(!0);try{const f=_(z,"users",t,"fitness",m);await Ne(f)}catch(f){p(f)}finally{l(!1)}}},loading:e,error:h}},{Title:mt,Text:V}=Le,gt=({weight:t})=>{const[a,s]=g.useState(void 0),[e,l]=g.useState(t),[h,p]=g.useState(void 0),u=me(S=>S.auth.user?.uid),[N,m]=g.useState(!1),[f,v]=g.useState(!1),[c,E]=g.useState(void 0),[L,k]=g.useState(!1);g.useEffect(()=>{(async()=>{if(u){m(!0);try{const I=await Me(_(z,"users",u));let $;if(I.exists()){const O=I.data();s(O.height);const R=ce(de(z,"users",u,"fitness"),ue("date","desc"),Oe(1)),T=await fe(R);T.empty?k(!0):$=T.docs[0].data().weight,l(t||$),O.height&&(t||$)?M(O.height,t||$):(t||$)&&M(O.height||100,t||$)}else s(100)}catch(I){console.error("Error fetching user data:",I)}finally{m(!1)}}})()},[u,t]),g.useEffect(()=>{M(a,e)},[a,e]);const M=(S,I)=>{if(S&&I){const $=parseFloat((I/(S/100)**2).toFixed(2));p($)}},P=async S=>{u&&E(S)},B=async()=>{if(!(!u||!c))try{await he(_(z,"users",u),{height:c},{merge:!0}),s(c),M(c,e),v(!1)}catch(S){console.error("Error updating user data:",S)}},w=h?h<18.5?{category:"저체중",color:"#69c0ff"}:h<23?{category:"정상",color:"#95de64"}:h<25?{category:"과체중",color:"#ffd666"}:h<30?{category:"비만",color:"#ffa39e"}:{category:"고도비만",color:"#ff4d4f"}:{category:L?"체중을 입력하세요":"키를 입력하세요",color:"#d9d9d9"},b=()=>{v(!0),E(a)},y=()=>{v(!1)};return r.jsxs("div",{style:{padding:"10px",background:"#fff",width:"100%",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[r.jsx(mt,{level:4,style:{marginBottom:0},children:"나의 BMI지수"}),r.jsx(Ie,{title:"키 입력",children:r.jsx(ft,{onClick:b,style:{fontSize:"20px",cursor:"pointer"}})})]}),r.jsx(V,{strong:!0,style:{fontSize:"16px",color:w.color,marginBottom:"5px"},children:h?`${h} (${w.category})`:w.category}),r.jsx(We,{title:"키 입력",open:f,onCancel:y,footer:[r.jsx(F,{onClick:y,children:"취소"},"cancel"),r.jsx(F,{type:"primary",onClick:B,children:"저장"},"save")],children:r.jsx(Fe,{placeholder:"키(cm)",type:"number",value:c,onChange:S=>P(Number(S.target.value))})}),r.jsxs("div",{style:{marginTop:"15px",position:"relative"},children:[r.jsx(Pe,{percent:100,showInfo:!1,strokeColor:{"0%":"#69c0ff","20%":"#95de64","50%":"#ffd666","75%":"#ffa39e","100%":"#ff4d4f"},trailColor:"#f0f0f0",style:{height:"20px",borderRadius:"10px"}}),h&&r.jsx("div",{style:{position:"absolute",top:"-1px",left:h<18.5?`${h/18.5*20}%`:h<23?`${20+(h-18.5)/(23-18.5)*30}%`:h<25?`${50+(h-23)/2*25}%`:h<30?`${75+(h-25)/5*25}%`:"100%",transform:"translateX(-50%)"},children:r.jsx("div",{style:{width:"6px",height:"15px",backgroundColor:"#000",borderRadius:"3px"}})})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[r.jsx(V,{children:"저체중"}),r.jsx(V,{children:"정상"}),r.jsx(V,{children:"과체중"}),r.jsx(V,{children:"비만"}),r.jsx(V,{children:"고도비만"})]})]})},U=["축구","농구","배구","야구","테니스","탁구","수영","달리기","자전거","요가","등산","배드민턴","볼링","스쿼시","걷기","조깅","서핑","홈트","헬스","골프","마라톤","승마","당구","낚시","복싱","태권도","유도","검도","레슬링","합기도","무에타이","주짓수","킥복싱","롤러 스케이팅","스케이트보드","필라테스","웨이트 트레이닝","클라이밍"],J={searchBarContainer:{padding:"12px",borderBottom:"solid 1px var(--adm-color-border)"},checkListContainer:{height:"300px",overflowY:"scroll"},checkList:{"--border-top":"0","--border-bottom":"0"}},$t=()=>{const t=new Date,[a,s]=g.useState(null),[e,l]=g.useState([]),h=me(n=>n.auth.user?.uid),{fitnessData:p,uploadData:u,deleteData:N,loading:m,error:f}=ht(h),[v,c]=g.useState({}),[E,L]=g.useState(0),[k,M]=g.useState(!1),[P,B]=g.useState(""),[x,w]=g.useState(""),b=g.useMemo(()=>x?U.filter(n=>n.includes(x)):U,[U,x]);g.useEffect(()=>{const n=p.find(d=>d.date===t.toISOString().split("T")[0]);n?(s(n.weight),l(n.exercises.map((d,j)=>({id:Date.now()+j,exercise:d.exercise,duration:d.duration,isNew:!1,firebaseId:d.id})))):(p.length>0?s(p[0].weight):s(null),l([]));const o={};p.forEach(d=>{o[d.date]=d.weight}),c(o)},[p]);const y=n=>{s(n)},S=async()=>{if(!h){console.error("UID is not available.");return}const n=t.toISOString().split("T")[0],o=e.map(d=>({exercise:d.exercise,duration:Number(d.duration)}));try{await u(n,Number(a),o),c(d=>({...d,[n]:Number(a)})),L(d=>d+1)}catch(d){console.error("Failed to upload data:",d)}},I=()=>{l([...e,{id:Date.now(),exercise:"",duration:"",isNew:!0}]),setTimeout(()=>{const n=document.querySelector(".overflow-y-auto");n&&n.scrollTo({top:n.scrollHeight,behavior:"smooth"})},100)},$=async n=>{const o=e.find(d=>d.id===n);if(l(e.filter(d=>d.id!==n)),!o.isNew){const d=t.toISOString().split("T")[0],j=e.filter(D=>D.id!==n).map(D=>({exercise:D.exercise,duration:Number(D.duration)}));try{await u(d,Number(a),j)}catch(D){console.error("Failed to update data:",D)}}},O=(n,o)=>{l(d=>d.map(j=>j.id===n?{...j,exercise:o}:j))},R=(n,o)=>{l(d=>d.map(j=>j.id===n?{...j,duration:o}:j))},T=async n=>{const o=e.find(d=>d.id===n);if(!o.exercise||!o.duration){alert("운동 종목과 운동 시간을 모두 입력해주세요.");return}if(o){const d=t.toISOString().split("T")[0],j=e.map(D=>({exercise:D.exercise,duration:Number(D.duration)}));try{await u(d,Number(a),j),l(D=>D.map(q=>q.id===n?{...q,isNew:!1}:q))}catch(D){console.error("Failed to upload data:",D)}}};return r.jsxs("div",{className:"flex flex-col w-full items-center overflow-y-auto",children:[r.jsx("div",{className:"w-[100%] bg-bg1 rounded-md shadow-lg overflow-y-hidden flex flex-col",children:r.jsx(He,{selectionMode:"single",onChange:n=>{},defaultValue:t,nextYearButton:!1,prevYearButton:!1,renderLabel:n=>{const o=n.toISOString().split("T")[0];return v[o]?r.jsxs("div",{children:[v[o],"kg"]}):r.jsx("div",{})}},E)}),r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsx("div",{className:"bg-bg1 rounded-xl shadow-lg mt-5",style:{width:"95%",height:"80px",border:"1px solid #d9d9d9"},children:r.jsxs(ne,{justify:"center",align:"center",gap:"large",style:{width:"100%",height:"100%"},children:[r.jsx(X,{addonBefore:"몸무게",addonAfter:"kg",type:"number",size:"large",min:20,max:400,style:{width:"65%"},value:a,onChange:y}),r.jsx(F,{color:"primary",variant:"outlined",size:"large",style:{fontFamily:"Pretendard-600",fontSize:"15px",letterSpacing:"2px"},onClick:S,children:"기록"})]})}),r.jsx("div",{className:"bg-bg1 rounded-xl shadow-lg mt-5 ",style:{width:"95%",height:"160px",border:"1px solid #d9d9d9",padding:"10px"},children:r.jsx(gt,{weight:a})}),r.jsxs("div",{style:{width:"95%",marginTop:"20px",border:"1px solid #d9d9d9",borderRadius:"10px",padding:"10px"},children:[r.jsxs(F,{type:"dashed",size:"large",onClick:I,style:{width:"100%",marginBottom:"10px"},children:[r.jsx(Re,{})," 운동 기록 추가하기"]}),e.map(n=>r.jsx("div",{className:"bg-bg1 rounded-xl shadow-lg mt-2",style:{width:"100%",height:"60px",border:"1px solid #d9d9d9"},children:r.jsxs(ne,{justify:"center",align:"center",gap:"large",style:{width:"95%",height:"100%"},children:[r.jsx(F,{onClick:()=>{B(n.exercise),M(!0)},style:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},disabled:!n.isNew,children:n.exercise||"운동 선택"}),r.jsxs(Be,{visible:k,onMaskClick:()=>{M(!1)},destroyOnClose:!0,bodyStyle:{height:"40vh"},children:[r.jsx("div",{style:J.searchBarContainer,children:r.jsx(Te,{placeholder:"운동 종목 검색",value:x,onChange:o=>{w(o)}})}),r.jsx("div",{style:J.checkListContainer,children:r.jsx(se,{style:J.checkList,value:P?[P]:[],onChange:o=>{o.length>0?(B(o[0]),O(n.id,o[0])):(B(""),O(n.id,"")),M(!1)},children:b.map(o=>r.jsx(se.Item,{value:o,children:o},o))})})]}),r.jsx(X,{addonAfter:"분",type:"number",min:1,max:500,size:"middle",style:{width:"30%"},value:n.duration,onChange:o=>R(n.id,o),status:n.isNew&&!n.duration?"error":"",disabled:!n.isNew}),n.isNew?r.jsx(F,{color:"primary",variant:"filled",onClick:()=>T(n.id),children:"저장"}):r.jsx(F,{color:"danger",variant:"filled",onClick:()=>$(n.id),children:"삭제"})]})},n.id))]})]}),r.jsx("div",{style:{height:"70px"}})]})};export{$t as default};
