import{p as G,n as S,l as v,r as m,j as e,k as w,ah as h,X as D,N as I,G as P,ab as T,a1 as k}from"./main-CAaAWYAx.js";import{F as t,R as i,s as o}from"./index-B7qNbRVu.js";import{C as q}from"./index-B0lXaUf5.js";import{R as B,C as x}from"./row-ZGTsWOQ9.js";import{I as d}from"./index-MaixxJOI.js";import{B as z}from"./button-C3qT-jyL.js";import"./InfoCircleFilled-BnjAL0QH.js";import"./Skeleton-CuImxf9e.js";import"./EllipsisOutlined-Ct4_0YAk.js";import"./PlusOutlined-CBbBXk1z.js";const{Option:a}=h,X=()=>{const y=G(),n=S(s=>s.auth.user?.uid),g=v(),[c]=t.useForm(),[j,f]=m.useState(!1),[r,u]=m.useState(!1),b=async s=>{if(!n){o.error("사용자 정보를 찾을 수 없습니다. 다시 로그인해주세요.");return}u(!0);try{const l=I(P,"users",n),R=s.goal==="customGoal"?s.customGoalText:s.goal,p={...s,goal:R,setupCompleted:!0};await T(l,p);const C={...p,uid:n,setupCompleted:!0};g(k(C)),o.success("프로필 설정이 완료되었습니다!"),setTimeout(()=>{y("/main",{replace:!0})},500)}catch(l){console.error("사용자 정보 업데이트 실패:",l),l.code==="permission-denied"?o.error("권한이 없습니다. 다시 로그인해주세요."):l.code==="unavailable"?o.error("네트워크 연결을 확인해주세요."):o.error("설정 저장에 실패했습니다. 다시 시도해주세요.")}finally{u(!1)}},F=s=>{f(s==="customGoal"),s!=="customGoal"&&c.setFieldValue("customGoalText",void 0)};return e.jsx("div",{style:{padding:"20px",minHeight:"100vh",backgroundColor:"#f0f2f5",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs(q,{style:{maxWidth:"450px",width:"100%",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(w.Title,{level:2,style:{textAlign:"center",marginBottom:"30px",fontFamily:"Pretendard-800",color:"#333",letterSpacing:"1px"},children:"프로필 설정"}),e.jsxs(t,{form:c,layout:"vertical",onFinish:b,size:"large",children:[e.jsxs(B,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(t.Item,{name:"height",label:e.jsx("span",{style:{fontFamily:"Pretendard-600"},children:"키 (cm)"}),rules:[{required:!0,message:"키를 입력해주세요"}],children:e.jsx(d,{placeholder:"예) 175",type:"number",style:{borderRadius:"8px"}})})}),e.jsx(x,{span:12,children:e.jsx(t.Item,{name:"age",label:e.jsx("span",{style:{fontFamily:"Pretendard-600"},children:"나이"}),rules:[{required:!0,message:"나이를 입력해주세요"}],children:e.jsx(d,{placeholder:"예) 25",type:"number",style:{borderRadius:"8px"}})})})]}),e.jsx(t.Item,{name:"gender",label:e.jsx("span",{style:{fontFamily:"Pretendard-600"},children:"성별"}),rules:[{required:!0,message:"성별을 선택해주세요"}],children:e.jsxs(i.Group,{style:{width:"100%"},children:[e.jsx(i.Button,{value:"male",style:{width:"50%",textAlign:"center",borderRadius:"8px 0 0 8px"},children:"남성"}),e.jsx(i.Button,{value:"female",style:{width:"50%",textAlign:"center",borderRadius:"0 8px 8px 0"},children:"여성"})]})}),e.jsx(t.Item,{name:"goal",label:e.jsx("span",{style:{fontFamily:"Pretendard-600"},children:"목표"}),rules:[{required:!0,message:"목표를 선택해주세요"}],children:e.jsxs(h,{onChange:F,placeholder:"목표를 선택해주세요",style:{borderRadius:"8px"},children:[e.jsx(a,{value:"diet",children:"다이어트"}),e.jsx(a,{value:"bulk",children:"벌크업"}),e.jsx(a,{value:"bodyprofile",children:"바디프로필"}),e.jsx(a,{value:"diabetes",children:"혈당관리"}),e.jsx(a,{value:"fitness",children:"체력증진"}),e.jsx(a,{value:"customGoal",children:"기타"})]})}),j&&e.jsx(t.Item,{name:"customGoalText",label:e.jsx("span",{style:{fontFamily:"Pretendard-600"},children:"목표 직접 입력"}),rules:[{required:!0,message:"목표를 입력해주세요"}],children:e.jsx(d,{placeholder:"목표를 입력해주세요",style:{borderRadius:"8px"}})}),e.jsx(t.Item,{style:{marginTop:"30px"},children:e.jsx(z,{type:"primary",htmlType:"submit",block:!0,loading:r,disabled:r,style:{height:"50px",borderRadius:"8px",backgroundColor:r?"#d9d9d9":"#5FDD9D",borderColor:r?"#d9d9d9":"#5FDD9D",boxShadow:r?"none":"0 2px 6px rgba(95, 221, 157, 0.4)"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(D,{size:"small",style:{marginRight:"8px"}}),e.jsx("span",{style:{fontFamily:"Pretendard-500",fontSize:"16px"},children:"설정 저장 중..."})]}):e.jsx("span",{style:{fontFamily:"Pretendard-700",fontSize:"16px",letterSpacing:"1px"},children:"설정 완료"})})})]})]})})};export{X as default};
